---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
---

<Layout title="Laboratorio SIM - Strumenti Avanzati">
    <Navigation />

    <div class="min-h-screen bg-slate-50">
        <main class="w-full max-w-7xl mx-auto px-4 py-12 md:py-20">
            <!-- Header -->
            <header class="mb-12 border-b border-slate-200 pb-8">
                <span
                    class="text-xs font-bold uppercase tracking-widest text-slate-500 mb-2 block"
                >
                    /// Strumenti Pratici e Reali
                </span>
                <h1
                    class="font-bold text-4xl md:text-5xl text-slate-900 mb-4 tracking-tight"
                >
                    Laboratorio <span class="text-blue-600">SIM</span>
                </h1>
                <p class="text-xl text-slate-600 max-w-3xl leading-relaxed">
                    Nessuna magia. Solo strumenti giusti per capire cosa non va.
                    <br />Usa questi tool, copia i risultati e avremo una base
                    solida su cui lavorare.
                </p>
                <div class="mt-8">
                    <a
                        href="/laboratorio-sim.html"
                        class="inline-flex items-center gap-2 bg-blue-600 text-white font-bold uppercase text-lg px-8 py-4 rounded-lg hover:bg-blue-700 hover:shadow-lg transition-all transform hover:-translate-y-1 no-underline"
                    >
                        <span>üöÄ</span> APRI WEB APP DIAGNOSTICA
                    </a>
                    <p
                        class="font-mono text-xs mt-3 text-slate-400 uppercase font-semibold tracking-wide"
                    >
                        MODELLO STANDALONE ‚Ä¢ NO INSTALL ‚Ä¢ FREE
                    </p>
                </div>
            </header>

            <!-- TABS NAVIGATION -->
            <div class="mb-8 flex flex-wrap gap-2" role="tablist">
                <button
                    onclick="switchTab('diagnostica')"
                    id="tab-diagnostica"
                    class="tab-btn px-6 py-3 font-bold uppercase rounded-lg transition-all border border-transparent bg-blue-600 text-white shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                    Diagnostica Guidata
                </button>
                <button
                    onclick="switchTab('comandi')"
                    id="tab-comandi"
                    class="tab-btn px-6 py-3 font-bold uppercase rounded-lg transition-all border border-slate-200 bg-white text-slate-600 hover:bg-emerald-50 hover:text-emerald-700 hover:border-emerald-200 shadow-sm hover:shadow-md"
                >
                    Generatore Comandi
                </button>
                <button
                    onclick="switchTab('kit')"
                    id="tab-kit"
                    class="tab-btn px-6 py-3 font-bold uppercase rounded-lg transition-all border border-slate-200 bg-white text-slate-600 hover:bg-red-50 hover:text-red-700 hover:border-red-200 shadow-sm hover:shadow-md"
                >
                    Kit Pronto Soccorso
                </button>
                <button
                    onclick="switchTab('demo')"
                    id="tab-demo"
                    class="tab-btn px-6 py-3 font-bold uppercase rounded-lg transition-all border border-slate-200 bg-white text-slate-600 hover:bg-violet-50 hover:text-violet-700 hover:border-violet-200 shadow-sm hover:shadow-md"
                >
                    Demo Web App
                </button>
            </div>

            <!-- SECTION 1: DIAGNOSTICA GUIDATA -->
            <section id="section-diagnostica" class="tab-content block">
                <div
                    class="bg-white border border-slate-200 rounded-xl p-6 md:p-8 shadow-sm relative overflow-hidden"
                >
                    <div
                        class="absolute top-0 right-0 bg-blue-50 text-blue-700 px-4 py-2 font-mono text-xs font-bold uppercase rounded-bl-xl border-l border-b border-blue-100"
                    >
                        Wizard v1.0
                    </div>

                    <h2
                        class="font-bold text-2xl uppercase mb-8 flex items-center gap-3 text-slate-800"
                    >
                        <span class="text-3xl">ü©∫</span> Diagnostica Rapida
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Sidebar Scelta Problema -->
                        <div
                            class="md:col-span-1 border-r border-slate-100 pr-4 h-[600px] overflow-y-auto custom-scrollbar"
                        >
                            <h3
                                class="font-bold text-xs uppercase text-slate-400 mb-4 tracking-wider"
                            >
                                Seleziona il problema:
                            </h3>
                            <div class="space-y-1" id="problem-list">
                                <!-- Populated via JS -->
                            </div>
                        </div>

                        <!-- Area Wizard -->
                        <div class="md:col-span-2 pl-4">
                            <div
                                id="wizard-start"
                                class="text-center py-24 bg-slate-50 rounded-lg border border-dashed border-slate-200"
                            >
                                <p class="text-slate-400 text-lg font-medium">
                                    ‚Üê Seleziona un problema dalla lista per
                                    iniziare.
                                </p>
                            </div>

                            <div id="wizard-content" class="hidden">
                                <div
                                    class="flex justify-between items-center mb-6 border-b border-slate-100 pb-4"
                                >
                                    <h3
                                        id="wizard-title"
                                        class="font-bold text-xl uppercase text-slate-800"
                                    >
                                    </h3>
                                    <span
                                        id="wizard-severity"
                                        class="px-3 py-1 rounded-full text-xs font-bold uppercase"
                                    ></span>
                                </div>

                                <form id="wizard-form" class="space-y-6 mb-8">
                                    <!-- Questions injected here -->
                                </form>

                                <div
                                    class="bg-blue-50 p-6 rounded-lg border border-blue-100"
                                >
                                    <h4
                                        class="font-bold uppercase text-sm mb-3 text-blue-900"
                                    >
                                        Risultato Diagnostico:
                                    </h4>
                                    <div
                                        id="wizard-output"
                                        class="font-mono text-sm bg-white p-4 border border-blue-200 rounded mb-4 whitespace-pre-wrap min-h-[100px] text-slate-700 shadow-inner"
                                    >
                                        In attesa di risposte...
                                    </div>
                                    <div class="flex flex-wrap gap-3">
                                        <button
                                            onclick="copyDiagnostic()"
                                            class="bg-blue-600 text-white px-5 py-2.5 rounded-lg font-bold hover:bg-blue-700 transition-colors uppercase text-sm shadow-sm flex items-center gap-2"
                                        >
                                            <span>üìã</span> Copia Risultato
                                        </button>
                                        <button
                                            onclick="downloadDiagnostic()"
                                            class="bg-white border border-slate-300 text-slate-700 px-5 py-2.5 rounded-lg font-bold hover:bg-slate-50 transition-colors uppercase text-sm shadow-sm flex items-center gap-2"
                                        >
                                            <span>‚¨á</span> Scarica .txt
                                        </button>
                                    </div>
                                    <p class="mt-4 text-xs text-slate-500">
                                        üí° Suggerimento: Copia questo testo e
                                        mandamelo via email per un preventivo
                                        mirato.
                                        <a
                                            href="mailto:info@roccoandrealigorio.it"
                                            class="underline text-blue-600 font-bold ml-1 hover:text-blue-800"
                                            >info@roccoandrealigorio.it</a
                                        >
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 2: GENERATORE COMANDI -->
            <section id="section-comandi" class="tab-content hidden">
                <div
                    class="bg-white border border-slate-200 rounded-xl p-6 md:p-8 shadow-sm border-t-4 border-t-emerald-500"
                >
                    <h2
                        class="font-bold text-2xl uppercase mb-2 flex items-center gap-3 text-slate-800"
                    >
                        <span class="text-3xl">üíª</span> Generatore Comandi
                    </h2>
                    <p class="text-slate-600 mb-8 max-w-2xl leading-relaxed">
                        Non ricordi mai la sintassi esatta? Ecco i comandi
                        pronti. Clicca "Copia", incollali nel terminale (CMD o
                        PowerShell) e guarda cosa succede.
                    </p>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Lista Comandi -->
                        <div
                            class="space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar"
                        >
                            <div id="commands-list" class="space-y-3"></div>
                        </div>

                        <!-- Output Area -->
                        <div
                            class="bg-slate-900 p-6 rounded-xl text-green-400 font-mono text-sm relative border border-slate-700 shadow-inner h-full min-h-[400px] flex flex-col"
                        >
                            <div
                                class="flex justify-between items-center mb-4 pb-2 border-b border-slate-700"
                            >
                                <span
                                    class="text-xs uppercase text-slate-400 font-bold"
                                    >Terminale (Preview / Paste)</span
                                >
                                <div class="flex gap-1.5">
                                    <div
                                        class="w-2.5 h-2.5 rounded-full bg-red-500"
                                    >
                                    </div>
                                    <div
                                        class="w-2.5 h-2.5 rounded-full bg-yellow-500"
                                    >
                                    </div>
                                    <div
                                        class="w-2.5 h-2.5 rounded-full bg-green-500"
                                    >
                                    </div>
                                </div>
                            </div>
                            <textarea
                                id="terminal-paste-area"
                                class="w-full flex-grow bg-transparent border-none resize-none focus:outline-none custom-scrollbar placeholder-slate-700 text-sm leading-relaxed"
                                placeholder="> Incolla qui l'output del comando..."
                            ></textarea>
                            <button
                                onclick="copyTerminal()"
                                class="self-end mt-4 bg-green-600 text-white px-3 py-1.5 rounded text-xs font-bold hover:bg-green-500 uppercase tracking-wide"
                            >
                                Copia Tutto
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 3: KIT PRONTO SOCCORSO -->
            <section id="section-kit" class="tab-content hidden">
                <div
                    class="bg-white border border-slate-200 rounded-xl p-6 md:p-8 shadow-sm border-t-4 border-t-red-500"
                >
                    <h2
                        class="font-bold text-2xl uppercase mb-6 flex items-center gap-3 text-slate-800"
                    >
                        <span class="text-3xl">üíä</span> Kit Pronto Soccorso Digitale
                    </h2>
                    <p
                        class="text-slate-700 mb-8 max-w-3xl bg-amber-50 p-4 border-l-4 border-amber-400 rounded-r-lg"
                    >
                        <strong>Disclaimer:</strong> Questi sono software di terze
                        parti, gratuiti e standard del settore. Usali a tuo rischio.
                        Se non sai cosa stai facendo, fermati e chiedi.
                    </p>

                    <div
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
                        id="kit-grid"
                    >
                        <!-- Kit items injected via JS -->
                    </div>
                </div>
            </section>

            <!-- SECTION 4: DEMO WEB APP -->
            <section id="section-demo" class="tab-content hidden">
                <div class="space-y-12">
                    <div
                        class="bg-slate-50 border border-slate-200 rounded-xl p-10 text-center mb-12 border-t-4 border-t-violet-500"
                    >
                        <h2
                            class="font-bold text-2xl uppercase mb-4 text-slate-900"
                        >
                            Demo Web App
                        </h2>
                        <p
                            class="text-slate-600 max-w-2xl mx-auto leading-relaxed"
                        >
                            Oltre ai tool di diagnostica, sviluppo applicazioni
                            web su misura per risolvere problemi aziendali
                            specifici. Ecco alcuni esempi di interfacce reali.
                        </p>
                    </div>

                    <!-- Demo Items (Static for now) -->
                    <!-- Demo 1 -->
                    <div
                        class="flex flex-col md:flex-row gap-8 items-center bg-white p-8 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all"
                    >
                        <div
                            class="w-full md:w-1/3 aspect-video bg-slate-100 rounded-lg overflow-hidden cursor-pointer group border border-slate-200 relative"
                            onclick="window.open('/tracker_demo.png', '_blank')"
                        >
                            <img
                                src="/tracker_demo.png"
                                alt="Tracker Interventi Demo"
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                onerror="this.src='/logo.png'; this.classList.add('object-contain', 'p-8', 'opacity-50');"
                            />
                            <div
                                class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                            >
                                <span
                                    class="bg-white text-slate-900 px-4 py-2 rounded-full font-bold text-xs uppercase tracking-widest"
                                    >Ingrandisci</span
                                >
                            </div>
                        </div>
                        <div class="w-full md:w-2/3">
                            <h4
                                class="font-bold text-xl uppercase mb-2 text-slate-800"
                            >
                                Tracker Interventi
                            </h4>
                            <p class="text-slate-600 mb-4 leading-relaxed">
                                Tieni traccia di chi fa cosa. Ideale per piccoli
                                team che si perdono i fogli di carta.
                            </p>
                            <ul class="text-sm space-y-2 mb-6 text-slate-500">
                                <li>
                                    <strong class="text-slate-700"
                                        >Cosa fa:</strong
                                    > Registra attivit√†, tempi e note tecniche.
                                </li>
                                <li>
                                    <strong class="text-slate-700"
                                        >A chi serve:</strong
                                    > Artigiani, tecnici, piccole squadre.
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- Demo 2 -->
                    <div
                        class="flex flex-col md:flex-row gap-8 items-center bg-white p-8 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all"
                    >
                        <div
                            class="w-full md:w-1/3 aspect-video bg-slate-100 rounded-lg overflow-hidden cursor-pointer group border border-slate-200 relative"
                            onclick="window.open('/asset_demo.png', '_blank')"
                        >
                            <img
                                src="/asset_demo.png"
                                alt="Asset Management Demo"
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                onerror="this.src='/logo.png'; this.classList.add('object-contain', 'p-8', 'opacity-50');"
                            />
                            <div
                                class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                            >
                                <span
                                    class="bg-white text-slate-900 px-4 py-2 rounded-full font-bold text-xs uppercase tracking-widest"
                                    >Ingrandisci</span
                                >
                            </div>
                        </div>
                        <div class="w-full md:w-2/3">
                            <h4
                                class="font-bold text-xl uppercase mb-2 text-slate-800"
                            >
                                Gestione Asset IT
                            </h4>
                            <p class="text-slate-600 mb-4 leading-relaxed">
                                Sai quanti computer hai? Ti serve questo per
                                smettere di comprare toner per stampanti buttate
                                anni fa.
                            </p>
                            <ul class="text-sm space-y-2 mb-6 text-slate-500">
                                <li>
                                    <strong class="text-slate-700"
                                        >Cosa fa:</strong
                                    > Cataloga hardware e software.
                                </li>
                                <li>
                                    <strong class="text-slate-700"
                                        >A chi serve:</strong
                                    > Uffici con pi√π di 3 PC.
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Demo 3 (New) -->
                    <div
                        class="flex flex-col md:flex-row gap-8 items-center bg-slate-900 p-8 rounded-xl border border-slate-700 shadow-lg hover:shadow-xl transition-all"
                    >
                        <div
                            class="w-full md:w-1/3 aspect-video bg-slate-800 rounded-lg overflow-hidden cursor-pointer group border border-slate-600 relative"
                            onclick="window.open('/network_demo.png', '_blank')"
                        >
                            <img
                                src="/network_demo.png"
                                alt="Network Monitor Demo"
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                onerror="this.src='/logo.png'; this.classList.add('object-contain', 'p-8', 'opacity-50');"
                            />
                            <div
                                class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                            >
                                <span
                                    class="bg-emerald-500 text-white px-4 py-2 rounded-full font-bold text-xs uppercase tracking-widest"
                                    >Ingrandisci</span
                                >
                            </div>
                        </div>
                        <div class="w-full md:w-2/3">
                            <h4
                                class="font-bold text-xl uppercase mb-2 text-white"
                            >
                                <span class="text-emerald-400">///</span> Network
                                Monitor Pro
                            </h4>
                            <p class="text-slate-300 mb-4 leading-relaxed">
                                Vedi i problemi prima che chiamino. Dashboard in
                                tempo reale per monitorare server, connessioni e
                                latenze critiche.
                            </p>
                            <ul class="text-sm space-y-2 mb-6 text-slate-400">
                                <li>
                                    <strong class="text-emerald-400"
                                        >Cosa fa:</strong
                                    > Ping test continui, allarmi down/up, grafici
                                    di banda.
                                </li>
                                <li>
                                    <strong class="text-emerald-400"
                                        >A chi serve:</strong
                                    > Sysadmin, Hotel, Aziende con VoIP.
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Demo 4 (New) -->
                    <div
                        class="flex flex-col md:flex-row gap-8 items-center bg-white p-8 rounded-xl border border-blue-200 shadow-sm hover:shadow-md transition-all"
                    >
                        <div
                            class="w-full md:w-1/3 aspect-video bg-blue-50 rounded-lg overflow-hidden cursor-pointer group border border-blue-100 relative"
                            onclick="window.open('/customer_portal_demo.png', '_blank')"
                        >
                            <img
                                src="/customer_portal_demo.png"
                                alt="Customer Portal Demo"
                                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                onerror="this.src='/logo.png'; this.classList.add('object-contain', 'p-8', 'opacity-50');"
                            />
                            <div
                                class="absolute inset-0 bg-blue-900/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                            >
                                <span
                                    class="bg-white text-blue-900 px-4 py-2 rounded-full font-bold text-xs uppercase tracking-widest"
                                    >Ingrandisci</span
                                >
                            </div>
                        </div>
                        <div class="w-full md:w-2/3">
                            <h4
                                class="font-bold text-xl uppercase mb-2 text-blue-900"
                            >
                                Portale Clienti Sicuro
                            </h4>
                            <p class="text-slate-600 mb-4 leading-relaxed">
                                Basta inviare password via email. Un'area
                                riservata dove scambiare file sensibili e vedere
                                lo stato dei ticket.
                            </p>
                            <ul class="text-sm space-y-2 mb-6 text-slate-500">
                                <li>
                                    <strong class="text-blue-700"
                                        >Cosa fa:</strong
                                    > GDPR Compliant file sharing, Ticket status,
                                    Fatture.
                                </li>
                                <li>
                                    <strong class="text-blue-700"
                                        >A chi serve:</strong
                                    > Commercialisti, Consulenti, Chiunque gestisca
                                    dati sensibili.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script is:inline>
        // --- DATA: DIAGNOSTICA ---
        const diagnosticData = [
            {
                id: "slow-pc",
                label: "PC Lento / Rallentato",
                severity: "Bassa",
                questions: [
                    {
                        id: "restart",
                        text: "Hai riavviato il PC nelle ultime 24 ore?",
                        type: "radio",
                    },
                    {
                        id: "updates",
                        text: "Ci sono aggiornamenti di Windows in sospeso?",
                        type: "radio",
                    },
                    {
                        id: "disk",
                        text: "Il disco C: √® quasi pieno (barra rossa)?",
                        type: "radio",
                    },
                    {
                        id: "startup",
                        text: "Hai molte app che si avviano da sole?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "crash",
                label: "PC si blocca o riavvia (BSOD)",
                severity: "Alta",
                questions: [
                    {
                        id: "bsod",
                        text: "Vedi una schermata blu con scritte bianche?",
                        type: "radio",
                    },
                    {
                        id: "heat",
                        text: "Il PC scotta al tatto o le ventole girano al massimo?",
                        type: "radio",
                    },
                    {
                        id: "new-hw",
                        text: "Hai collegato nuovi dispositivi USB recentemente?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "wifi",
                label: "Wi-Fi Instabile / Cade",
                severity: "Media",
                questions: [
                    {
                        id: "router",
                        text: "Hai riavviato il modem/router (spento per 60s)?",
                        type: "radio",
                    },
                    {
                        id: "distance",
                        text: "Il problema persiste anche stando vicino al router?",
                        type: "radio",
                    },
                    {
                        id: "device",
                        text: "Succede su tutti i dispositivi o solo su questo?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "updates",
                label: "Problemi post-aggiornamento Windows",
                severity: "Media",
                questions: [
                    {
                        id: "kb",
                        text: "Il PC si √® aggiornato oggi o ieri?",
                        type: "radio",
                    },
                    {
                        id: "error-msg",
                        text: "Vedi messaggi di errore specifici all'avvio?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "internet",
                label: "Internet Lento / DNS",
                severity: "Bassa",
                questions: [
                    {
                        id: "speedtest",
                        text: "Lo speedtest √® molto pi√π basso del solito?",
                        type: "radio",
                    },
                    {
                        id: "websites",
                        text: "Alcuni siti non si aprono proprio?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "email",
                label: "Email (Invio/Ricezione/Spazio)",
                severity: "Media",
                questions: [
                    {
                        id: "webmail",
                        text: "Dalla webmail (browser) funziona tutto?",
                        type: "radio",
                    },
                    {
                        id: "attachment",
                        text: "Stai inviando allegati pesanti (>10MB)?",
                        type: "radio",
                    },
                    {
                        id: "full",
                        text: "Hai ricevuto avvisi di casella piena?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "backup",
                label: "Backup Dati (Mai verificato)",
                severity: "Alta",
                questions: [
                    {
                        id: "external",
                        text: "Hai un disco esterno collegato?",
                        type: "radio",
                    },
                    {
                        id: "cloud",
                        text: "Usi un sistema cloud (Drive/Dropbox)?",
                        type: "radio",
                    },
                    {
                        id: "test",
                        text: "Hai mai provato ad aprire un file dal backup?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "disk-space",
                label: "Spazio Disco Insufficiente",
                severity: "Media",
                questions: [
                    {
                        id: "trash",
                        text: "Hai svuotato il cestino?",
                        type: "radio",
                    },
                    {
                        id: "downloads",
                        text: "La cartella Download √® piena di file vecchi?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "account",
                label: "Accesso / Password / Account",
                severity: "Alta",
                questions: [
                    {
                        id: "caps",
                        text: "Il tasto Bloc Maiusc √® attivo?",
                        type: "radio",
                    },
                    {
                        id: "keyboard",
                        text: "La tastiera scrive i caratteri giusti (prova su note)?",
                        type: "radio",
                    },
                ],
            },
            {
                id: "printer",
                label: "Stampante non funziona",
                severity: "Bassa",
                questions: [
                    {
                        id: "cable",
                        text: "√à collegata (USB o Wi-Fi) e accesa?",
                        type: "radio",
                    },
                    {
                        id: "paper",
                        text: "C'√® carta e inchiostro?",
                        type: "radio",
                    },
                    {
                        id: "queue",
                        text: "C'√® una coda di stampa bloccata?",
                        type: "radio",
                    },
                ],
            },
        ];

        // --- DATA: COMANDI ---
        const commandsData = [
            {
                cmd: "systeminfo",
                desc: "Mostra tutto sul tuo PC: data installazione Windows, modello, RAM, e uptime.",
                usage: "Utile per sapere esattamente che macchina hai davanti.",
            },
            {
                cmd: "ipconfig /all",
                desc: "Dettagli completi della rete. IP, MAC address, DNS.",
                usage: "Fondamentale per problemi di rete e Wi-Fi.",
            },
            {
                cmd: "ping 8.8.8.8",
                desc: "Controlla se raggiungi Google. Se fallisce, non hai internet.",
                usage: "Il test base di connettivit√†.",
            },
            {
                cmd: "tracert google.com",
                desc: "Mostra la strada che fanno i tuoi dati. Vedi dove si bloccano.",
                usage: "Per capire se √® colpa tua o del provider.",
            },
            {
                cmd: "nslookup google.com",
                desc: "Testa se il DNS funziona (traduce nomi in IP).",
                usage: "Se internet va ma i siti non si aprono.",
            },
            {
                cmd: "netstat -an",
                desc: "Vedi tutte le connessioni attive del tuo PC.",
                usage: "Per scovare spyware o connessioni sospette.",
            },
            {
                cmd: "tasklist",
                desc: "Elenco di tutti i processi attivi.",
                usage: "Come Gestione Attivit√†, ma testuale ed esportabile.",
            },
            {
                cmd: "wmic diskdrive get status",
                desc: "Chiede al disco fisso se sta bene (S.M.A.R.T.).",
                usage: "Risposta rapida: OK o Pred Fail (corri a fare backup!).",
            },
            {
                cmd: "chkdsk C: /scan",
                desc: "Scansiona il disco per errori senza riavviare.",
                usage: "Controllo salute file system.",
            },
            {
                cmd: "sfc /scannow",
                desc: "Ripara i file di sistema di Windows corrotti.",
                usage: 'Il "paracetamolo" di Windows: risolve tanti piccoli guai. (Richiede Admin)',
            },
            {
                cmd: "dism /online /cleanup-image /restorehealth",
                desc: "Ripara l'immagine di Windows usando Windows Update.",
                usage: "Se sfc fallisce, si usa questo. (Richiede Admin)",
            },
            {
                cmd: "powercfg /energy",
                desc: "Analizza l'efficienza energetica e la batteria.",
                usage: "Genera un report HTML dettagliato sul consumo.",
            },
        ];

        const kitData = [
            {
                category: "Diagnostica HW",
                items: [
                    {
                        name: "CrystalDiskInfo",
                        desc: "Salute Disco (SMART)",
                        use: "Monitoraggio dischi",
                        caution: "OK",
                        link: "https://crystalmark.info/en/software/crystaldiskinfo/",
                    },
                    {
                        name: "HWMonitor",
                        desc: "Temperature e Volt",
                        use: "Controllo surriscaldamento",
                        caution: "OK",
                        link: "https://www.cpuid.com/softwares/hwmonitor.html",
                    },
                    {
                        name: "CPU-Z",
                        desc: "Dettagli PROCESSORE/RAM",
                        use: "Info Hardware",
                        caution: "OK",
                        link: "https://www.cpuid.com/softwares/cpu-z.html",
                    },
                    {
                        name: "GPU-Z",
                        desc: "Dettagli Scheda Video",
                        use: "Info GPU",
                        caution: "OK",
                        link: "https://www.techpowerup.com/gpuz/",
                    },
                    {
                        name: "MemTest86",
                        desc: "Test RAM Bootable",
                        use: "Diagnosi Errori RAM",
                        caution: "Richiede chiavetta USB avviabile",
                        link: "https://www.memtest86.com/",
                    },
                ],
            },
            {
                category: "Sicurezza & Malware",
                items: [
                    {
                        name: "Malwarebytes",
                        desc: "Best-in-class Scanner",
                        use: "Scansione manuale virus",
                        caution: "Versione Free basta per scansioni",
                        link: "https://www.malwarebytes.com/",
                    },
                    {
                        name: "AdwCleaner",
                        desc: "Rimuovi Adware/Toolbar",
                        use: "Browser lento o pieno di pubblicit√†",
                        caution: "Portable",
                        link: "https://www.malwarebytes.com/adwcleaner",
                    },
                    {
                        name: "HitmanPro",
                        desc: "Second Opinion Scanner",
                        use: "Controllo incrociato",
                        caution: "Trial 30gg",
                        link: "https://www.hitmanpro.com/",
                    },
                    {
                        name: "VirusTotal (Web)",
                        desc: "Analisi file online",
                        use: "Controllo singolo file sospetto",
                        caution: "Web Tool",
                        link: "https://www.virustotal.com/",
                    },
                ],
            },
            {
                category: "Pulizia & Manutenzione",
                items: [
                    {
                        name: "BleachBit",
                        desc: "Pulizia file inutili",
                        use: "Liberare spazio",
                        caution: "Attento alle opzioni",
                        link: "https://www.bleachbit.org/",
                    },
                    {
                        name: "WizTree",
                        desc: "Mappa spazio disco",
                        use: "Vedere cosa occupa spazio",
                        caution: "Molto veloce",
                        link: "https://diskanalyzer.com/",
                    },
                    {
                        name: "Revo Uninstaller Free",
                        desc: "Disinstallazione pulita",
                        use: "Rimuovere programmi ostinati",
                        caution: "OK",
                        link: "https://www.revouninstaller.com/revo-uninstaller-free-download/",
                    },
                    {
                        name: "Ninite",
                        desc: "Install/Update automatico",
                        use: "Setup PC nuovo",
                        caution: "Sicurissimo",
                        link: "https://ninite.com/",
                    },
                ],
            },
            {
                category: "Backup & Recovery",
                items: [
                    {
                        name: "Veeam Agent Free",
                        desc: "Backup intero sistema",
                        use: "Immagine completa PC",
                        caution: "Richiede account",
                        link: "https://www.veeam.com/agent-for-windows-community-edition.html",
                    },
                    {
                        name: "Hasleo Backup Suite",
                        desc: "Clonazione/Backup Free",
                        use: "Clonazione disco / Backup",
                        caution: "Ottimo per migrare OS",
                        link: "https://www.easyuefi.com/backup-software/backup-suite-free.html",
                    },
                ],
            },
            {
                category: "Ufficio & Produttivit√†",
                items: [
                    {
                        name: "LibreOffice",
                        desc: "Suite Office completa",
                        use: "Alternative a Word/Excel",
                        caution: "Open Source",
                        link: "https://www.libreoffice.org/",
                    },
                    {
                        name: "PDFGear",
                        desc: "Editor PDF Gratuito",
                        use: "Modifica PDF",
                        caution: "Free con AI",
                        link: "https://www.pdfgear.com/",
                    },
                    {
                        name: "AnyDesk",
                        desc: "Desktop Remoto",
                        use: "Assistenza remota",
                        caution: "Uso privato",
                        link: "https://anydesk.com/",
                    },
                ],
            },
        ];

        // --- LOGIC ---

        function switchTab(tabId) {
            document
                .querySelectorAll(".tab-content")
                .forEach((el) => el.classList.add("hidden"));
            document
                .getElementById("section-" + tabId)
                .classList.remove("hidden");

            document.querySelectorAll(".tab-btn").forEach((el) => {
                el.classList.remove("bg-blue-600", "text-white");
                el.classList.add(
                    "bg-white",
                    "text-slate-600",
                    "border-slate-200",
                );
            });
            const activeBtn = document.getElementById("tab-" + tabId);
            activeBtn.classList.remove(
                "bg-white",
                "text-slate-600",
                "border-slate-200",
            );
            activeBtn.classList.add(
                "bg-blue-600",
                "text-white",
                "border-transparent",
            );
        }

        function initDiagnostica() {
            const list = document.getElementById("problem-list");
            list.innerHTML = "";
            diagnosticData.forEach((item) => {
                const btn = document.createElement("button");
                btn.className =
                    "w-full text-left p-3 hover:bg-slate-50 border-l-4 border-transparent hover:border-blue-600 transition-all text-sm font-medium text-slate-700 hover:text-blue-900 rounded-r-lg";
                btn.innerText = item.label;
                btn.onclick = () => loadWizard(item);
                list.appendChild(btn);
            });
        }

        let currentDiag = null;

        function loadWizard(item) {
            currentDiag = item;
            document.getElementById("wizard-start").classList.add("hidden");
            document
                .getElementById("wizard-content")
                .classList.remove("hidden");

            document.getElementById("wizard-title").innerText = item.label;
            const badge = document.getElementById("wizard-severity");
            badge.innerText = "Priorit√†: " + item.severity;
            badge.className =
                "px-3 py-1 rounded-full text-xs font-bold uppercase text-white " +
                (item.severity === "Alta"
                    ? "bg-red-600"
                    : item.severity === "Media"
                      ? "bg-amber-500"
                      : "bg-green-600");

            const form = document.getElementById("wizard-form");
            form.innerHTML = "";

            item.questions.forEach((q, idx) => {
                const div = document.createElement("div");
                div.className =
                    "bg-slate-50 p-4 rounded-lg border border-slate-200";
                div.innerHTML = `
                <p class="font-bold mb-3 text-sm text-slate-800">${idx + 1}. ${q.text}</p>
                <div class="flex gap-4">
                    <label class="flex items-center gap-2 cursor-pointer text-sm font-medium text-slate-700 bg-white px-3 py-1.5 rounded border border-slate-200 hover:border-blue-400 transition-colors">
                        <input type="radio" name="${q.id}" value="S√¨" onchange="updateOutput()" class="accent-blue-600"> S√¨
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer text-sm font-medium text-slate-700 bg-white px-3 py-1.5 rounded border border-slate-200 hover:border-blue-400 transition-colors">
                        <input type="radio" name="${q.id}" value="No" onchange="updateOutput()" class="accent-blue-600"> No
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer text-sm font-medium text-slate-700 bg-white px-3 py-1.5 rounded border border-slate-200 hover:border-blue-400 transition-colors">
                        <input type="radio" name="${q.id}" value="Non so" onchange="updateOutput()" class="accent-blue-600"> Non so
                    </label>
                </div>
            `;
                form.appendChild(div);
            });
            updateOutput();
        }

        function updateOutput() {
            if (!currentDiag) return;
            const inputs = document.querySelectorAll(
                "#wizard-form input:checked",
            );
            let text = `DIAGNOSI GUIDATA - LABORATIORIO SIM\n`;
            text += `Problema: ${currentDiag.label} (Priorit√†: ${currentDiag.severity})\n`;
            text += `Data: ${new Date().toLocaleString()}\n\n`;
            text += `RISPOSTE:\n`;

            inputs.forEach((input) => {
                const qText = input
                    .closest("div")
                    .parentElement.querySelector("p").innerText;
                text += `- ${qText} -> ${input.value}\n`;
            });

            text += `\nCONSIGLIO AUTOMATICO:\n`;
            const yesCount = Array.from(inputs).filter(
                (i) => i.value === "S√¨",
            ).length;
            if (yesCount > 0) {
                text += `Hai risposto 'S√¨' ad alcune verifiche critiche. Questo indica un problema specifico gi√† isolato. `;
                if (currentDiag.severity === "Alta")
                    text += `Ti consiglio di spegnere il dispositivo e contattare l'assistenza.`;
                else
                    text += `Potrebbe essere risolvibile con una manutenzione standard.`;
            } else {
                text += `Le verifiche di base non hanno evidenziato cause ovvie. Serve un'analisi pi√π approfondita dei log.`;
            }

            document.getElementById("wizard-output").innerText = text;
        }

        function copyDiagnostic() {
            const text = document.getElementById("wizard-output").innerText;
            navigator.clipboard.writeText(text);
            alert("Diagnosi copiata negli appunti!");
        }

        function downloadDiagnostic() {
            const text = document.getElementById("wizard-output").innerText;
            const blob = new Blob([text], { type: "text/plain" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = `Diagnosi_${currentDiag.id}.txt`;
            a.click();
        }

        function initComandi() {
            const list = document.getElementById("commands-list");
            list.innerHTML = "";
            commandsData.forEach((cmd) => {
                const div = document.createElement("div");
                div.className =
                    "bg-slate-50 p-4 border-l-4 border-blue-600 hover:bg-slate-100 transition-colors group rounded-r-lg shadow-sm";
                div.innerHTML = `
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div class="font-mono font-bold text-sm bg-white border border-slate-200 px-3 py-1.5 select-all rounded text-slate-800">${cmd.cmd}</div>
                    <button onclick="copyCommand('${cmd.cmd}')" class="text-xs uppercase font-bold bg-white border border-slate-300 px-3 py-1.5 rounded hover:bg-slate-800 hover:text-white transition-colors text-slate-600">Copia</button>
                </div>
                <p class="text-sm font-bold mt-3 text-slate-800">${cmd.desc}</p>
                <p class="text-xs text-slate-500 italic mt-1 font-serif">${cmd.usage}</p>
            `;
                list.appendChild(div);
            });
        }

        function copyCommand(text) {
            navigator.clipboard.writeText(text);
        }

        function copyTerminal() {
            const text = document.getElementById("terminal-paste-area").value;
            if (!text) return;
            navigator.clipboard.writeText(text);
            alert("Contenuto terminale copiato!");
        }

        function initKit() {
            const grid = document.getElementById("kit-grid");
            grid.innerHTML = "";
            kitData.forEach((cat) => {
                const col = document.createElement("div");
                col.className = "space-y-4";
                col.innerHTML = `<h3 class="font-bold text-lg uppercase border-b border-slate-200 pb-2 text-slate-700">${cat.category}</h3>`;

                cat.items.forEach((tool) => {
                    const card = document.createElement("div");
                    card.className =
                        "bg-white p-4 border border-slate-200 rounded-lg hover:shadow-md transition-all shadow-sm relative group";
                    card.innerHTML = `
                    <h4 class="font-bold text-base text-slate-800 mb-1 flex justify-between items-center">
                        ${tool.name}
                        <a href="${tool.link}" target="_blank" class="text-[10px] bg-blue-50 text-blue-700 px-2 py-1 rounded hover:bg-blue-100 font-bold uppercase tracking-wider">Scarica</a>
                    </h4>
                    <p class="text-xs font-medium mb-3 text-slate-600 leading-relaxed">${tool.desc}</p>
                    <div class="text-[10px] text-slate-500 space-y-1 bg-slate-50 p-2 rounded border border-slate-100">
                        <p><span class="font-bold text-green-700">‚úì UTILIZZO:</span> ${tool.use}</p>
                        ${tool.caution !== "OK" && tool.caution !== "Nessuna." ? `<p><span class="font-bold text-red-600">‚ö† ATTENZIONE:</span> ${tool.caution}</p>` : ""}
                    </div>
                `;
                    col.appendChild(card);
                });
                grid.appendChild(col);
            });
        }

        initDiagnostica();
        initComandi();
        initKit();
    </script>
</Layout>
